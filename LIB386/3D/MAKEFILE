# name the compiler
!ifdef %NT
CPP= $(%WATCOM)\binnt\wpp386
CC = $(%WATCOM)\binnt\wcc386
WL = $(%WATCOM)\binnt\wlib
!else
CPP= $(%WATCOM)\binw\wpp386
CC = $(%WATCOM)\binw\wcc386
WL = $(%WATCOM)\binw\wlib
!endif

!ifdef %MASM
ASM= $(%MASM)\bin\ml
!else
ASM= f:\compil\masm611\bin\ml
!endif

OBJETS1=TANTAB.OBJ	SINTAB.OBJ	SINTABF.OBJ			&
	SQRROOT.OBJ	DISTANCE.OBJ	REALVAL.OBJ	ARCSIN.OBJ	&
	GETANG2D.OBJ	GETANG3D.OBJ	LIGHT.OBJ	ROTVECT.OBJ	&
	CAMERA.OBJ							&
	DATAMAT.OBJ	IMAT.OBJ					&
	IMATSTD.OBJ	IMATSTDI.OBJ	IMATSTDM.OBJ	IMATSTDF.OBJ	&
	IMAT3DS.OBJ	IMAT3DSI.OBJ	IMAT3DSM.OBJ	IMAT3DSF.OBJ	&
	IMATTRA.OBJ	IMATTRAI.OBJ	IMATTRAM.OBJ	IMATTRAF.OBJ	&
	GMATTRA.OBJ	GMATTRAI.OBJ	GMATTRAM.OBJ	GMATTRAF.OBJ	&
	MULMAT.OBJ	MULMATI.OBJ	MULMATM.OBJ	MULMATF.OBJ	&
	ROTMAT.OBJ	ROTMATI.OBJ	ROTMATU.OBJ			&
	COPYMAT.OBJ	COPYMATI.OBJ	COPYMATM.OBJ	COPYMATF.OBJ	&
	FLIPMAT.OBJ	FLIPMATI.OBJ	FLIPMATM.OBJ			&
	IROT3D.OBJ	IROT3DI.OBJ	IROT3DM.OBJ			&
	LROT3D.OBJ	LROT3DI.OBJ	LROT3DF.OBJ	LROT3DM.OBJ	&
	ROT3D.OBJ	ROT3DI.OBJ	ROT3DM.OBJ			&
	LIROT3D.OBJ	LIROT3DI.OBJ	LIROT3DM.OBJ	LIROT3DF.OBJ	&
	ROT2D.OBJ	ROT2DI.OBJ	ROT2DM.OBJ			&
	LROT2D.OBJ	LROT2DI.OBJ	LROT2DM.OBJ	LROT2DF.OBJ	&
	ROTLIST.OBJ	ROTLISTI.OBJ	ROTLISTM.OBJ	ROTLISTF.OBJ	&
	ROTRALI.OBJ	ROTRALII.OBJ	ROTRALIM.OBJ	ROTRALIF.OBJ	&
	LROTLIS.OBJ	LROTLISI.OBJ	LROTLISM.OBJ	LROTLISF.OBJ	&
	LROTRLI.OBJ	LROTRLII.OBJ	LROTRLIM.OBJ	LROTRLIF.OBJ	&
	PRLI.OBJ	PRLIISO.OBJ					&
  	PRLI3D.OBJ	PRLI3DI.OBJ	PRLI3DF.OBJ			&
	LPRLI.OBJ	LPRLIISO.OBJ					&
  	LPRLI3D.OBJ	LPRLI3DI.OBJ	LPRLI3DF.OBJ			&
	LPROJ.OBJ	LPROJISO.OBJ	PROJ.OBJ			&
	LPROJ3D.OBJ	LPROJ3DI.OBJ	LPROJ3DF.OBJ			&
	LRPRO3D.OBJ	LRPRO3DI.OBJ	LRPRO3DM.OBJ	LRPRO3DF.OBJ	&
	LRPROIS.OBJ	LRPROISI.OBJ	LRPROISM.OBJ	LRPROISF.OBJ	&
	LRPRO.OBJ							&
	LWRPRO.OBJ	LWRPRO3D.OBJ					&
	RPRO3D.OBJ	RPRO3DI.OBJ	RPRO3DM.OBJ			&
	RPROIS.OBJ	RPROISI.OBJ	RPROISM.OBJ			&
	RPRO.OBJ							&
	WRPRO.OBJ	WRPRO3D.OBJ					&
	LITLIST.OBJ	LITLISTI.OBJ	LITLISTF.OBJ	LITLISTM.OBJ	&
	MOVE.OBJ

!ifeq BT NT
CFLAGS	= /D_WIN32 /hc /fh=NT
AFLAGS	= /D_WIN32
LIB     = NT_3D
OBJETS2 =
!else
CFLAGS  = /D_DOS4GW /hw /fh=DOS
AFLAGS	= /D_DOS4GW
LIB     = DOS_3D
OBJETS2 =
!endif

CFLAGS	= $+$(CFLAGS)$-R.PCH /5r
AFLAGS = $+$(AFLAGS)$- /DREG_CALL

CFLAGS = $+$(CFLAGS)$- /D_BUILDING_LIB /d1 /oaxt /zq /s /w3 /mf /DLIB_LOCAL /bt=$(BT)
LFLAGS = /c /q /b
AFLAGS = $+$(AFLAGS)$- /nologo /Cx /Zm /c /W0 /Sa /Zd /Cp

.SILENT

$(LIB).LIB: $(OBJETS1) $(OBJETS2)
	*$(WL) $(LFLAGS) $(LIB) $?
#	PRNTITRE G "$(LIB)"

.cpp.obj:
#	PRNTITRE M "$*.CPP"
	$(CPP) $* $(CFLAGS)

.c.obj:
#	PRNTITRE M "$*.C"
	$(CC) $* $(CFLAGS)

.asm.obj:
#	PRNTITRE M "$*.ASM"
	$(ASM) $(AFLAGS) $*.ASM
